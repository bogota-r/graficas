---
title: "Gráficas en R"
---

```{r setup, echo = FALSE, warnings = FALSE, message = FALSE}
library("graphics")
library("grid")
library("lattice")
library("ggplot2")

# Lo de siempre
library("magrittr")
library("dplyr")
library("tidyr")

# Datos para ejemplos
library("saber") # Ver github.com/nebulae-co/saber

# Algunas opciones de knitr
knitr::opts_chunk$set(message = FALSE,
                      comment = "#>")
```

# Gráficas en R

## Contenido (I)
<!-- Esto es solo para guiarnos luego miramos si lo dejamos o no --> 

- Que es R (por si acaso)
- Gráficas Base
    * Metodos - Todo de una: `plot()`
    * Componentes de bajo nivel
    * Ejemplos
- Grid
    * Que es grid (o por qué otro sistema?)
    * Componentes (solo hay de bajo nivel)

## Contenido (II)
- lattice
    * Trellis plots
    * ...
    * Ejemplos
- ggplot2
    * Una gramatica de graficas
    * Capas, geometrias y componentes æsteticos
    * Ejemplos

## Contenido (III)
- Maś allá: graficas interactivas
    * ggvis y shiny
    * Integración con JS y htmlwidgets
    * Ayuda y otros recursos

## Qué es R?

> *"R is a language and environment for statistical computing and graphics."*

Entre otras cosas R incluye:

  - capacidad para almacenar y manipular datos **efectivamente**
  - un conjunto de operadores para hacer cálculos sobre arreglos, particularmente matrices
  - una colección grande, **coherente** e integrada de herramientas para el análisis de datos
  - **dispositivos gráficos para el análisis y visualización de datos, tanto en pantalla como en impreso**
  - un lenguaje de programación bien desarrollado, **simple y eficaz**

## [El ambiente para graficas de R](https://cran.r-project.org/web/views/Graphics.html) {.smaller}

```{r graphics-diagram, child = "graficas_files/graphics-diagram.rmd"}
```


Grafica basada en [codigo](https://www.stat.auckland.ac.nz/~paul/RGraphics/organisation-graphicslevels.R) del libro [*R Graphics* de Paul Murrel](https://www.stat.auckland.ac.nz/~paul/RGraphics/rgraphics.html)

## Basicamente

```r
library("graphics")
library("grid")

# http://lattice.r-forge.r-project.org/
library("lattice")

# https://github.com/hadley/ggplot2
library("ggplot2")
```

# Gráficas Base

## Metodos (o todo de una):

- `plot()` para "diagramas de dispersión"
- `barplot()` para graficas de barra
- `hist()` para histogramas
- `boxplot()` para diagramas de cajas y bigotes
- `pie()` - mejor evitarlos

## `plot()`

```{r plot, eval = FALSE}
y <- rnorm(30)
types <- c("p", "l", "b", "c", "o", "h", "s", "S", "n")

par(mfrow = c(3, 3), cex = 0.6, mar = c(3, 3, 3, 1))

for (type in types){
  plot(y, type = type, main = paste0("type = ", type))
}
```

## `plot()`

```{r plot, echo = FALSE}
```

## `barplot()`

```{r barplot-data, include = FALSE, cache = TRUE}
# library("saber")  # Ver github.com/nebulae-co/saber

data(SB11_20142)

estratos <- SB11_20142 %$%
  table(PERS_GENERO, FINS_ESTRATOVIVIENDAENERGIA)

educacion_madre <- SB11_20142 %$%
  table(PERS_GENERO, FINS_NIVELEDUCATIVOMADRE)
```

```{r barplot, eval = FALSE}
par(mfrow = c(2, 1), mar = c(3, 3, 1, 1), cex = 0.6)

barplot(estratos, angle = c(45, 135), 
        density = 20, col = "grey",
        names = colnames(estratos))

legend("topright", title = "Genero", rownames(estratos), cex = 1.5,
       angle = c(45, 135), density = 20, fill = "gray")

barplot(educacion_madre, angle = c(45, 135), 
        density = 20, col = "grey",
        names = colnames(educacion_madre),
        horiz = TRUE)
```

## `barplot()`
```{r barplot, echo = FALSE}
```

## Componentes de bajo nivel

# Grid

## Que es grid?

## Componentes de bajo nivel

## Lattice

# ggplot

## R moderno o el ["Hadleyverse"](https://barryrowlingson.github.io/hadleyverse/) {.build}

- `readr`, `readxl` y `haven` lectura de archivos.
- `lubridate` manejo de fechas y tiempo.
- `stringr` interface a `stringi` para manejo de caracteres.
- `dplyr` y `tidyr` manipulación y limpieza de datos.
- `ggplot2` una gramática de gráficas - util para abstraer y construir visualizaciones.

# Más allá: Gráficas interactivas

Una deuda grande de R.

# ggvis y shiny

# Integración con JS - htmlwidgets

## Una tabla

Función    | Vectores      | Matrices                    | Arreglos         | 
-----------|---------------|-----------------------------|------------------|
Dimensión  | `length()`    | `ncol()` y `nrow()`         | `dim()`          |  
Nombres    | `names()`     | `rownames()` y `colnames()` | `dimnames()`     |
Concatenar | `c()`         | `cbind()` y `rbind()`       | `abind::abind()` |  

## Ayuda y otros recursos {.build}

La vista de tareas con la que empezamos: [_Vista de Tareas_/Gráficas](http://cran.r-project.org/web/views/grafics).

Canales: [en twitter #rstats](https://twitter.com/hashtag/rstats) y en [StackOverflow el tag R](http://stackoverflow.com/questions/tagged/r). También pueden [googlea-R](https://www.google.com.co/#q=R) R + "pregunta".  

Algunas buenas referencias:

- [Quick R - Gráficas](http://www.statmethods.net/graphs/index.html)
- [Springer - Use R Series](http://www.springer.com/series/6991?detailsPage=titles) R en la práctica en diferentes contextos.
- ...

## Colofón {.smaller .left-margin}

Esta presentación fue escrita en RMarkdown desde RStudio y compilada por `rmarkdown` en la plantilla `ioslides` de Google gracias a `knitr` y `pandoc`. Publicada en la web en GitHub gracias a GitHub Pages.
